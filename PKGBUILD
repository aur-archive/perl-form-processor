# PKGBUILD generated by pacpan
pkgname=perl-form-processor
_realname=Form-Processor
pkgver=0.04
pkgrel=1
pkgdesc="no description available"
arch=(i686 x86_64)
license=('unknown: check http://search.cpan.org/src/HANK/Form-Processor-0.19/README.txt')
url="http://search.cpan.org/~hank/Form-Processor"
options=(!emptydirs)

depends=('perl' 'perl-rose-object' 'perl-universal-require')

#provides=('Form-Processor')
provides=('form-processor=0.04' 'Form::Processor::Field::MD5_Password=0.03' 'perl-form-processor-field-md5_password=0.03' 'Form::Processor::Field::MonthName=0.03' 'perl-form-processor-field-monthname=0.03' 'Form::Processor::Field::Checkbox=0.03' 'perl-form-processor-field-checkbox=0.03' 'Form::Processor::Field::DateTimeManip=0.03' 'perl-form-processor-field-datetimemanip=0.03' 'Form::Processor::Field::USPhone=0.03' 'perl-form-processor-field-usphone=0.03' 'Form::Processor::Field::Integer=0.03' 'perl-form-processor-field-integer=0.03' 'Form::Processor::Field::Money=0.03' 'perl-form-processor-field-money=0.03' 'Form::Processor::Field::Hidden=0.03' 'perl-form-processor-field-hidden=0.03' 'Form::Processor::Field::DateTime=0.03' 'perl-form-processor-field-datetime=0.03' 'Form::Processor::Field::Password=0.03' 'perl-form-processor-field-password=0.03' 'Form::Processor::Field::MonthDay=0.03' 'perl-form-processor-field-monthday=0.03' 'Form::Processor::Field::Template=0.03' 'perl-form-processor-field-template=0.03' 'Form::Processor::Field::Boolean=0.03' 'perl-form-processor-field-boolean=0.03' 'Form::Processor::Field::Upload=0.03' 'perl-form-processor-field-upload=0.03' 'Form::Processor::Field::Readonly=0.03' 'perl-form-processor-field-readonly=0.03' 'Form::Processor::Field::Weekday=0.03' 'perl-form-processor-field-weekday=0.03' 'Form::Processor::Field::TextArea=0.03' 'perl-form-processor-field-textarea=0.03' 'Form::Processor::Field::Username=0.03' 'perl-form-processor-field-username=0.03' 'Form::Processor::Field=0.02' 'perl-form-processor-field=0.02' 'Form::Processor::Field::Phone=0.03' 'perl-form-processor-field-phone=0.03' 'Form::Processor::Field::Year=0.03' 'perl-form-processor-field-year=0.03' 'Form::Processor::Field::Date_yyyy_mm_dd=0.03' 'perl-form-processor-field-date_yyyy_mm_dd=0.03' 'Form::Processor::Field::Text=0.03' 'perl-form-processor-field-text=0.03' 'Form::Processor::Field::PosInteger=0.03' 'perl-form-processor-field-posinteger=0.03' 'Form::Processor::Field::CIDR_List=0.03' 'perl-form-processor-field-cidr_list=0.03' 'Form::Processor::Field::IntRange=0.03' 'perl-form-processor-field-intrange=0.03' 'Form::Processor::Field::Month=0.03' 'perl-form-processor-field-month=0.03' 'Form::Processor::I18N=undef' 'perl-form-processor-i18n=undef' 'Form::Processor::Field::WeekdayStr=0.03' 'perl-form-processor-field-weekdaystr=0.03' 'Form::Processor::Field::DateTimeDMYHM=0.03' 'perl-form-processor-field-datetimedmyhm=0.03' 'Form::Processor::Field::Email=0.03' 'perl-form-processor-field-email=0.03' 'Form::Processor::Field::Second=0.03' 'perl-form-processor-field-second=0.03' 'Form::Processor::Field::OneToTen=0.03' 'perl-form-processor-field-onetoten=0.03' 'Form::Processor::Field::Hour=0.03' 'perl-form-processor-field-hour=0.03' 'Form::Processor::Field::Multiple=0.03' 'perl-form-processor-field-multiple=0.03' 'Form::Processor::Field::URL=0.03' 'perl-form-processor-field-url=0.03' 'Form::Processor::Field::Select=0.03' 'perl-form-processor-field-select=0.03' 'Form::Processor::Field::Minute=0.03' 'perl-form-processor-field-minute=0.03' 'Form::Processor::Model=undef' 'perl-form-processor-model=undef' 'Form::Processor::Field::USZipcode=0.03' 'perl-form-processor-field-uszipcode=0.03' 'Form::Processor::Field::FutureDate=0.03' 'perl-form-processor-field-futuredate=0.03' 'Form::Processor::Field::DateTimeDMYHM2=0.03' 'perl-form-processor-field-datetimedmyhm2=0.03' 'Form::Processor::I18N::en_us=undef' 'perl-form-processor-i18n-en_us=undef' 'Form::Processor=0.04' 'perl-form-processor=0.04' 'Form::Processor::Field::HtmlArea=0.03' 'perl-form-processor-field-htmlarea=0.03')

source=(http://search.cpan.org/CPAN/authors/id/H/HA/HANK/Form-Processor-0.19.tar.gz)
md5sums=('0d164b7b62fc9d305ee2266b26c4d342')

build() {
  _expected_dir="${srcdir}/${_realname}-${pkgver}"
  if [ -d "$_expected_dir" ]; then
    cd "$_expected_dir"
  else
    _expected_dir="${srcdir}/$(bsdtar -t -f $(basename $source) | head -n1)"
    if [ -d "$_expected_dir" ]; then
      cd "$_expected_dir"
    else
      _makefile=$(find $srcdir -iname Makefile.PL)
      if [ ! -z "$_makefile" ]; then
        _expected_dir=$(dirname $_makefile)
        if [ -d "$_expected_dir" ]; then
          cd "$_expected_dir"
        else
          echo "[1;31mERROR[0m unable to detect source directory"
          echo "[1;34m-->[0m this is often due to CPAN's lack of standard naming conventions"
          echo "[1;34m-->[0m it may be possible to fix this by adjusting the build function in the PKGBUILD"
        fi
      fi
    fi
  fi
  # install module in vendor directories.
  PERL_MM_USE_DEFAULT=1 perl Makefile.PL INSTALLDIRS=vendor || return 1
  make  || return 1
  make install DESTDIR=${pkgdir} || return 1

  # remove perllocal.pod and .packlist
  find ${pkgdir} -name perllocal.pod -delete
  find ${pkgdir} -name .packlist -delete
}

